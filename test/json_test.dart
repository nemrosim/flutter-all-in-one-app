import 'package:authapp/json_parsing.dart';
import 'package:flutter_test/flutter_test.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString =
        '[22972661,22970120,22970693,22971656,22972479,22970771,22969533,22971863,22971952,22960225,22971691,22964696,22971308,22957383,22964259,22959023,22968839,22965078,22968079,22964708,22958675,22964298,22965049,22966332,22968039,22965767,22968743,22956392,22965187,22967716,22969984,22968280,22971861,22963495,22959351,22967255,22958477,22968796,22970523,22963822,22964211,22968808,22954765,22968803,22964910,22967717,22959013,22964031,22966043,22956182,22964441,22972530,22969477,22961296,22964972,22963232,22962547,22969987,22968081,22967876,22963765,22963226,22961054,22956318,22959897,22962830,22961666,22956832,22959587,22967492,22966167,22956776,22962609,22942278,22955842,22960199,22962663,22959238,22952070,22963649,22956948,22967305,22955606,22963478,22957573,22953401,22963611,22953316,22967968,22956369,22958352,22944194,22945942,22951281,22955607,22955076,22947447,22958870,22957884,22936818,22970537,22947424,22941224,22969552,22940564,22953730,22943749,22950848,22962574,22956562,22948687,22954366,22967342,22951986,22940908,22951790,22962869,22955260,22955971,22945630,22948885,22961304,22954656,22968686,22963609,22953320,22965077,22957091,22955419,22956951,22943620,22949604,22955779,22957920,22944690,22953176,22964500,22954815,22944193,22961916,22955085,22969142,22955394,22946710,22953891,22957517,22970652,22955420,22948499,22953484,22944891,22957988,22952572,22957609,22943536,22938901,22957327,22957968,22951312,22947968,22942461,22943126,22953506,22955611,22967741,22964612,22959646,22936742,22941204,22945725,22939068,22963001,22955488,22952085,22953622,22948723,22947341,22952131,22943427,22964651,22954068,22943075,22957295,22965691,22956870,22961902,22945072,22941231,22955269,22941884,22938790,22967513,22954382,22946014,22963687,22961497,22957994,22945353,22949225,22941215,22941144,22944684,22943983,22949965,22943601,22939207,22948451,22965003,22957082,22963909,22938604,22941489,22967063,22941185,22958161,22965657,22943001,22947395,22946824,22944382,22945741,22941223,22944314,22948055,22958535,22944490,22940246,22937076,22968028,22942027,22940211,22955283,22941247,22943990,22939248,22966723,22938736,22940416,22946949,22939044,22940394,22949615,22957677,22941733,22959847,22937851,22947892,22945907,22952573,22965383,22950495,22955350,22949312,22941206,22945065,22959919,22937202,22950236,22941190,22940450,22961455,22946092,22961206,22955068,22957485,22940735,22945360,22936811,22944837,22948388,22950915,22945690,22961321,22945142,22956975,22952871,22956990,22946674,22958396,22954486,22946832,22939686,22946084,22944806,22951210,22960799,22940360,22941995,22962724,22967890,22967883,22948415,22967000,22958047,22955810,22944903,22961857,22960222,22969281,22951762,22950009,22940265,22949580,22942752,22948054,22941233,22960485,22965131,22938152,22944287,22958280,22948236,22964437,22946177,22964952,22949057,22937049,22944769,22950088,22962248,22962776,22959764,22940947,22945216,22946272,22940781,22941493,22955077,22949276,22938506,22946264,22941235,22956713,22943217,22946280,22951434,22952766,22963560,22961101,22948797,22945409,22963448,22951056,22958772,22968065,22949238,22950386,22937244,22949149,22940839,22949118,22949075,22950676,22940503,22948593,22958543,22964861,22947791,22962070,22942533,22938705,22938547,22939099,22938665,22941464,22955234,22960824,22955094,22941166,22938933,22941009,22956175,22956138,22965246,22944398,22950615,22943266,22938828,22955507,22939751,22959348,22951499,22946046,22956636,22944567,22941221,22958472,22958304,22958271,22958217,22957162,22951584,22936778,22939319,22936520,22957839,22939560,22947984,22950789,22954564,22939127,22952878,22959495,22967248,22970602,22956915,22964455,22940917,22937097,22939343,22939065,22957874,22941077,22955376,22949116,22949059,22948504,22958996,22950174,22941179,22947522,22937620,22950422,22940456,22952477,22946612,22949860,22939667,22943789,22952984,22939288,22954082,22960162,22953943,22938627,22948653,22943269,22948394,22936790,22937844,22947766,22950221,22961989,22952966,22945252,22943011,22939979,22938103,22948801,22952493,22944336,22941245,22948065,22948774,22943674,22941526,22946783,22940303,22938575,22943203,22951579,22951501,22951691,22942861,22952016,22945654,22938929,22945015,22939816,22944585,22958267,22937007,22945804,22937529,22949098,22948965,22940442,22940387,22956873,22939910,22942781,22937605,22950285,22938349,22946941,22937835,22937760,22962614,22936557,22953079,22951290,22948225,22937663,22947564,22940009,22944026,22952506,22952390,22943761,22943577]';
//    expect(() => parseTopStories(jsonString).first, throwsUnimplementedError);
    expect(parseTopStories(jsonString).first, 22972661);
  });

  test("parses items.json", () {
    const jsonString =
        '{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}';
//    expect(() => parseItem(jsonString), throwsUnimplementedError);

    expect(parseItem(jsonString).by, 'dhouston');
  });
}
